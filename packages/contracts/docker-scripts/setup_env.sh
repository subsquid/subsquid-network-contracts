#!/bin/bash

FORK_URL="${FORK_URL:-https://arb1.arbitrum.io/rpc}"
FORK_BLOCK_NUMBER="${FORK_BLOCK_NUMBER:-latest}"
ANVIL_PORT="${ANVIL_PORT:-8545}"
CHAIN_ID="${CHAIN_ID:-42161}"

SQD_ADDRESS="0x1337420dED5ADb9980CFc35f8f2B054ea86f8aB1"
ROUTER_ADDRESS="0x67F56D27dab93eEb07f6372274aCa277F49dA941"
NETWORK_CONTROLLER_ADDRESS="0xf5462EF65Ca8a9Cca789c912Bc8ada80b582d68d"
STAKING_ADDRESS="0xb31a0d39d2c69ed4b28d96e12cbf52c5f9ac9a51"
WORKER_REGISTRATION_ADDRESS="0x36e2b147db67e76ab67a4d07c293670ebefcae4e"
REWARD_TREASURY_ADDRESS="0x237abf43bc51fd5c50d0d598a1a4c26e56a8a2a0"
OLD_DISTRIBUTED_REWARDS_ADDRESS="0xab690da5815659fe94f08f73e870d91a4d376d8f"
GATEWAY_REGISTRY_ADDRESS="0x8a90a1ce5fa8cf71de9e6f76b7d3c0b72feb8c4b"
REWARD_CALCULATION_ADDRESS="0xd3D2C185a30484641C07b60e7d952d7B85516eB5"

ADMIN_KEY="${ADMIN_KEY:-}"
DISTRIBUTOR1_KEY="${DISTRIBUTOR1_KEY:-}"
DISTRIBUTOR2_KEY="${DISTRIBUTOR2_KEY:-}"

NUM_WORKERS="${NUM_WORKERS:-500}"
BATCH_SIZE="${BATCH_SIZE:-100}"
IPFS_LINK="${IPFS_LINK:-ipfs://test}"
SKIP_COMMIT="${SKIP_COMMIT:-false}"
SKIP_APPROVE="${SKIP_APPROVE:-false}"
SKIP_DISTRIBUTE="${SKIP_DISTRIBUTE:-false}"

RPC_URL="http://localhost:${ANVIL_PORT}"
PRIVATE_KEY="$ADMIN_KEY"

export FORK_URL FORK_BLOCK_NUMBER ANVIL_PORT CHAIN_ID
export SQD_ADDRESS ROUTER_ADDRESS NETWORK_CONTROLLER_ADDRESS STAKING_ADDRESS
export WORKER_REGISTRATION_ADDRESS REWARD_TREASURY_ADDRESS OLD_DISTRIBUTED_REWARDS_ADDRESS
export GATEWAY_REGISTRY_ADDRESS REWARD_CALCULATION_ADDRESS
export ADMIN_KEY DISTRIBUTOR1_KEY DISTRIBUTOR2_KEY
export NUM_WORKERS BATCH_SIZE IPFS_LINK SKIP_COMMIT SKIP_APPROVE SKIP_DISTRIBUTE
export RPC_URL PRIVATE_KEY

echo "Environment variables set for Arbitrum fork" 